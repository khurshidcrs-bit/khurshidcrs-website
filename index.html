<!doctype html>
<html lang="nl">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Khurshid CRS</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>.modal-open { overflow: hidden; }</style>
</head>
<body class="min-h-screen bg-white text-gray-900">
  <header class="relative">
    <div id="hero" class="h-[42vh] w-full bg-center bg-cover"></div>
    <div class="absolute inset-0 bg-black/40 pointer-events-none"></div>
    <div class="absolute inset-0 flex items-center justify-center">
      <h1 id="bedrijfsnaam" class="text-white text-4xl md:text-5xl font-bold drop-shadow">Khurshid CRS</h1>
    </div>
  </header>

  <main class="mx-auto max-w-6xl px-4 py-10">
    <div class="mb-6 flex items-center gap-2">
      <div class="relative w-full md:w-1/2">
        <input id="zoek" class="w-full border rounded-lg px-3 py-2" placeholder="Zoek op merk, bouwjaar, brandstof, etc.">
      </div>
    </div>
    <div id="cards" class="grid gap-6 sm:grid-cols-2 lg:grid-cols-3"></div>
    <p id="geen" class="hidden text-sm text-gray-500">Geen auto's gevonden. Pas uw zoekopdracht aan.</p>
  </main>

  <footer class="mt-16 border-t bg-gray-50">
    <div class="mx-auto max-w-6xl px-4 py-10">
      <div class="grid gap-6 md:grid-cols-3">
        <div>
          <h3 class="text-lg font-semibold">Khurshid CRS</h3>
          <p class="mt-2 text-sm text-gray-500">Betrouwbare occasions en persoonlijke service.</p>
        </div>
        <div>
          <h4 class="text-sm font-medium">Adres</h4>
          <ul id="adres" class="mt-2 space-y-1 text-sm text-gray-500"></ul>
        </div>
        <div>
          <h4 class="text-sm font-medium">Contact</h4>
          <ul class="mt-2 space-y-1 text-sm text-gray-500">
            <li>Tel: <a id="tel" href="tel:0658966881" class="hover:underline">0658966881</a></li>
            <li>E-mail: <a id="mail" href="mailto:khurshidcrs@gmail.com" class="hover:underline">khurshidcrs@gmail.com</a></li>
          </ul>
        </div>
      </div>
      <div class="mt-8 text-xs text-gray-500">© <span id="jaar"></span> Khurshid CRS. Alle rechten voorbehouden.</div>
    </div>
  </footer>

  <div id="modal" class="fixed inset-0 bg-black/50 items-center justify-center hidden p-4">
    <div class="bg-white rounded-2xl max-w-3xl w-full overflow-hidden">
      <div class="flex items-center justify-between px-4 py-3 border-b">
        <h2 id="modal-titel" class="text-lg font-semibold"></h2>
        <span id="modal-prijs" class="inline-flex items-center rounded-full border px-3 py-1 text-xs"></span>
      </div>
      <div class="p-4 space-y-4">
        <div class="relative aspect-video w-full overflow-hidden rounded-xl bg-gray-100">
          <img id="carousel-img" class="h-full w-full object-cover" alt="Auto foto">
          <button id="prev" class="absolute left-2 top-1/2 -translate-y-1/2 rounded-full bg-white/80 p-2 shadow hidden">◀</button>
          <button id="next" class="absolute right-2 top-1/2 -translate-y-1/2 rounded-full bg-white/80 p-2 shadow hidden">▶</button>
        </div>
        <div id="chips" class="flex flex-wrap gap-2"></div>
        <p id="beschrijving" class="text-sm leading-relaxed text-gray-600"></p>
        <div class="pt-2 flex justify-end">
          <button id="sluit" class="px-4 py-2 rounded-lg border">Sluiten</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    const HEADER_AFBEELDING = "./assets/header-voorgevel.png";
    const ADRESREGELS = ["Zomerdijk 11", "1505HW Zaandam", "Nederland"];
    const VOORRAAD = [
  {
    "id": "vito2021",
    "merk": "Mercedes-Benz Vito 116 Pro Tourer",
    "bouwjaar": 2021,
    "km": 150000,
    "prijs": 29000,
    "brandstof": "Diesel",
    "transmissie": "Automaat",
    "kleur": "Zwart",
    "fotos": [
      "./assets/vito-2021-1.avif",
      "./assets/vito-2021-2.avif",
      "./assets/vito-2021-3.avif"
    ],
    "beschrijving": "Zeer nette Vito 116 Pro Tourer (serie 447), dealeronderhouden en klaar voor zakelijk of privégebruik."
  },
  {
    "id": "evito2020",
    "merk": "Mercedes-Benz Vito Tourer eVito 129 Pro lang",
    "bouwjaar": 2020,
    "km": 55000,
    "prijs": 27000,
    "brandstof": "Elektriciteit",
    "transmissie": "Automaat",
    "kleur": "Wit",
    "fotos": [
      "./assets/evito-2020-1.jpeg",
      "./assets/evito-2020-2.jpeg",
      "./assets/evito-2020-3.jpeg"
    ],
    "beschrijving": "eVito 129 Pro lang (12/2020), 150 kW/204 pk, 90 kWh accu, 5 zitplaatsen, Euro 6d."
  },
  {
    "id": "v250d2022",
    "merk": "Mercedes-Benz V 250d LANG AMG-LINE",
    "bouwjaar": 2022,
    "km": 70000,
    "prijs": 45000,
    "brandstof": "Diesel",
    "transmissie": "Automaat",
    "kleur": "Grijs",
    "fotos": [
      "./assets/v250d-2022-1.jpeg",
      "./assets/v250d-2022-2.jpeg",
      "./assets/v250d-2022-3.jpeg"
    ],
    "beschrijving": "Luxe V 250d AMG-Line (08/2022), 190 pk, 2-zone airco, camera’s en schuifdeuren l/r, Euro 6d."
  },
  {
    "id": "t61-2020",
    "merk": "Volkswagen T6.1 Box 4Motion",
    "bouwjaar": 2020,
    "km": 185000,
    "prijs": 18950,
    "brandstof": "Diesel",
    "transmissie": "Handgeschakeld",
    "kleur": "Wit",
    "fotos": [
      "./assets/t61-2020-1.jpeg",
      "./assets/t61-2020-2.jpeg",
      "./assets/t61-2020-3.jpeg"
    ],
    "beschrijving": "Transporter T6.1 4MOTION (05/2020), 150 pk, camera en PDC v/a, Euro 6d-TEMP."
  },
  {
    "id": "caddy-2022",
    "merk": "Volkswagen Caddy Cargo",
    "bouwjaar": 2022,
    "km": 56000,
    "prijs": 15000,
    "brandstof": "Benzine",
    "transmissie": "Handgeschakeld",
    "kleur": "Rood",
    "fotos": [
      "./assets/caddy-2022-1.jpeg",
      "./assets/caddy-2022-2.jpeg",
      "./assets/caddy-2022-3.jpeg"
    ],
    "beschrijving": "Caddy 1.5 TSI (114 pk), kersenrood, 2 zitplaatsen, airco, Euro 6d."
  },
  {
    "id": "bmw-218i-2020",
    "merk": "BMW 218i Active Tourer",
    "bouwjaar": 2020,
    "km": 65000,
    "prijs": 18950,
    "brandstof": "Benzine",
    "transmissie": "Automaat",
    "kleur": "Zwart",
    "fotos": [
      "./assets/bmw-218i-2020-1.jpeg",
      "./assets/bmw-218i-2020-2.jpeg",
      "./assets/bmw-218i-2020-3.jpeg"
    ],
    "beschrijving": "BMW 2 Serie Active Tourer (F45), 140 pk, zwart metallic, onderhoud 10/2024 bij 55.605 km."
  }
];

    const euro = (n) => n.toLocaleString("nl-NL", { style: "currency", currency: "EUR", maximumFractionDigits: 0 });
    const el = (tag, className = "", children = []) => {
      const e = document.createElement(tag);
      if (className) e.className = className;
      if (!Array.isArray(children)) children = [children];
      children.forEach(c => { if (c !== null && c !== undefined) e.append(c.nodeType ? c : document.createTextNode(c)); });
      return e;
    };
    const chip = (text) => el("span", "inline-flex items-center rounded-full border px-3 py-1 text-xs", text);
    const state = { zoek: "", selectie: null, index: 0 };

    function initStatic() {
      document.getElementById("jaar").textContent = new Date().getFullYear();
      document.getElementById("hero").style.backgroundImage = `url('${HEADER_AFBEELDING}')`;
      const adres = document.getElementById("adres");
      ADRESREGELS.forEach(r => adres.append(el("li", "", r)));
    }

    function filterVoorraad(q) {
      const query = (q || "").trim().toLowerCase();
      if (!query) return VOORRAAD;
      return VOORRAAD.filter(a => [a.merk, a.bouwjaar, a.km, a.brandstof, a.transmissie, a.kleur, a.beschrijving]
        .filter(Boolean).some(v => String(v).toLowerCase().includes(query)));
    }

    function renderCards() {
      const container = document.getElementById("cards");
      const geen = document.getElementById("geen");
      container.innerHTML = "";
      const lijst = filterVoorraad(state.zoek);
      if (!lijst.length) { geen.classList.remove("hidden"); return; }
      geen.classList.add("hidden");
      lijst.forEach(auto => {
        const card = el("div", "overflow-hidden rounded-2xl shadow-sm border");
        const imgWrap = el("div", "aspect-video w-full bg-gray-100");
        const img = el("img", "h-full w-full object-cover");
        img.loading = "lazy";
        img.src = (auto.fotos && auto.fotos[0]) ? auto.fotos[0] : "";
        img.alt = auto.merk;
        imgWrap.append(img);
        const head = el("div", "p-4 border-b");
        const title = el("div", "flex items-center justify-between text-xl");
        title.append(el("span", "", auto.merk), chip(euro(auto.prijs)));
        head.append(title);
        const body = el("div", "p-4 text-sm text-gray-500");
        const chipsRow = el("div", "flex flex-wrap gap-2");
        chipsRow.append(chip(String(auto.bouwjaar)));
        chipsRow.append(chip(`${Number(auto.km).toLocaleString('nl-NL')} km`));
        if (auto.brandstof) chipsRow.append(chip(auto.brandstof));
        if (auto.transmissie) chipsRow.append(chip(auto.transmissie));
        if (auto.kleur) chipsRow.append(chip(auto.kleur));
        body.append(chipsRow);
        const knop = el("button", "mt-4 w-full px-4 py-2 rounded-lg bg-gray-900 text-white", "Bekijk details");
        knop.addEventListener("click", () => openModal(auto));
        body.append(knop);
        card.append(imgWrap, head, body);
        container.append(card);
      });
    }

    const modal = document.getElementById("modal");
    const modalTitel = document.getElementById("modal-titel");
    const modalPrijs = document.getElementById("modal-prijs");
    const beschrijving = document.getElementById("beschrijving");
    const chipsContainer = document.getElementById("chips");
    const carouselImg = document.getElementById("carousel-img");
    const prevBtn = document.getElementById("prev");
    const nextBtn = document.getElementById("next");
    const sluitBtn = document.getElementById("sluit");

    function openModal(auto) {
      state.selectie = auto;
      state.index = 0;
      modalTitel.textContent = auto.merk;
      modalPrijs.textContent = euro(auto.prijs);
      beschrijving.textContent = auto.beschrijving || "";
      chipsContainer.innerHTML = "";
      chipsContainer.append(chip(`Bouwjaar: ${auto.bouwjaar}`));
      chipsContainer.append(chip(`Kilometerstand: ${Number(auto.km).toLocaleString('nl-NL')} km`));
      if (auto.brandstof) chipsContainer.append(chip(`Brandstof: ${auto.brandstof}`));
      if (auto.transmissie) chipsContainer.append(chip(`Transmissie: ${auto.transmissie}`));
      if (auto.kleur) chipsContainer.append(chip(`Kleur: ${auto.kleur}`));

      const hasFotos = auto.fotos && auto.fotos.length > 0;
      carouselImg.src = hasFotos ? auto.fotos[0] : "";
      prevBtn.classList.toggle("hidden", !hasFotos || auto.fotos.length < 2);
      nextBtn.classList.toggle("hidden", !hasFotos || auto.fotos.length < 2);

      modal.classList.remove("hidden"); modal.classList.add("flex");
      document.body.classList.add("modal-open");
    }

    function closeModal() {
      modal.classList.add("hidden"); 
      modal.classList.remove("flex"); 
      document.body.classList.remove("modal-open");
      state.selectie = null;
    }
    function nextImg() { const f = state.selectie?.fotos||[]; if(!f.length) return; state.index=(state.index+1)%f.length; carouselImg.src=f[state.index]; }
    function prevImg() { const f = state.selectie?.fotos||[]; if(!f.length) return; state.index=(state.index-1+f.length)%f.length; carouselImg.src=f[state.index]; }

    document.getElementById("zoek").addEventListener("input", (e) => { state.zoek = e.target.value; renderCards(); });
    document.getElementById("next").addEventListener("click", nextImg);
    document.getElementById("prev").addEventListener("click", prevImg);
    document.getElementById("sluit").addEventListener("click", closeModal);
    modal.addEventListener("click", (e) => { if (e.target === modal) closeModal(); });

    initStatic(); renderCards();
  </script>
</body>
</html>
